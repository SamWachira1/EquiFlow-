import{r as i,j as e,R as K}from"./react-c619c8b3.js";import{a as Q,c as V}from"./react-dom-5ca1b2a9.js";import{u as g,a as y,P as J}from"./react-redux-2bd72909.js";import{N as X,c as Y,R as G}from"./react-router-dom-d023ade3.js";import{c as z,a as Z,l as ee}from"./redux-07a0b6c2.js";import{t as se}from"./redux-thunk-ef899f4c.js";import{e as P,f as M,g as te,O as re}from"./react-router-fb6de028.js";import"./hoist-non-react-statics-23d96a9a.js";import{R as ne,L as ae,C as oe,X as ie,Y as ce,T as le,a as ue}from"./recharts-40c21aed.js";import{F as de}from"./react-icons-7745842d.js";import"./eventemitter3-aeaf34cf.js";import"./scheduler-765c72db.js";import"./use-sync-external-store-a9288389.js";import"./@remix-run-3349734c.js";import"./@babel-31a99f1b.js";import"./react-is-e8e5dbb3.js";import"./clsx-0839fdbe.js";import"./lodash-6ed64bb8.js";import"./react-smooth-b07ebfd5.js";import"./prop-types-75a17b13.js";import"./fast-equals-a0711cdd.js";import"./tiny-invariant-dd7d57d2.js";import"./d3-shape-9e788a4f.js";import"./d3-path-41c4cb36.js";import"./victory-vendor-5e3e398c.js";import"./d3-scale-4cce9527.js";import"./internmap-7949acc8.js";import"./d3-array-7d9b19f9.js";import"./d3-time-format-aa787c71.js";import"./d3-time-9ce187c0.js";import"./d3-interpolate-8fa1f6ff.js";import"./d3-color-6502c434.js";import"./d3-format-ffdb8652.js";import"./recharts-scale-170b47f7.js";import"./decimal.js-light-6fe16ef2.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const F="session/setUser",O="session/removeUser",I=t=>({type:F,payload:t}),he=()=>({type:O}),pe=()=>async t=>{const s=await fetch("/api/auth/");if(s.ok){const r=await s.json();if(r.errors)return;t(I(r))}},A=t=>async s=>{const r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok){const a=await r.json();s(I(a))}else return r.status<500?await r.json():{server:"Something went wrong. Please try again"}},q=t=>async s=>{const r=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(r.ok){const a=await r.json();s(I(a))}else return r.status<500?await r.json():{server:"Something went wrong. Please try again"}},me=()=>async t=>{await fetch("/api/auth/logout"),t(he())},xe={user:null};function fe(t=xe,s){switch(s.type){case F:return{...t,user:s.payload};case O:return{...t,user:null};default:return t}}const B="search/fetchSearchResultsRequest",H="search/fetchSearchResultsSuccess",$="search/fetchSearchResultsFailure",R=(t,s)=>({type:t,payload:s}),je=t=>async s=>{s(R(B));try{const r=await fetch(`/api/search?query=${t}`);if(!r.ok)throw new Error("Network response was not ok");const a=await r.json();s(R(H,a))}catch(r){s(R($,r.message))}},ge={loading:!1,results:[],error:""},we=(t=ge,s)=>{switch(s.type){case B:return{...t,loading:!0};case H:return{loading:!1,results:s.payload,error:""};case $:return{loading:!1,results:[],error:s.payload};default:return t}},C="securities/fetchSecuritiesDataRequest",b="securities/fetchSecuritiesDataSuccess",E="securities/fetchSecuritiesDataFailure",j=(t,s)=>({type:t,payload:s}),ye=t=>async s=>{s(j(C));try{const r=await fetch(`/api/securities/${t}`);if(!r.ok)throw new Error("Network response was not ok");const a=await r.json();s(j(b,a))}catch(r){s(j(E,r.message))}},D=t=>async s=>{s(j(C));try{const r=await fetch(`/api/securities/historical/1d/${t}`);if(!r.ok)throw new Error("Network response was not ok");const a=await r.json();s(j(b,{historicalData:a.data}))}catch(r){s(j(E,r.message))}},Se=t=>async s=>{s(j(C));try{const r=await fetch(`/api/securities/historical/1w/${t}`);if(!r.ok)throw new Error("Network response was not ok");const a=await r.json();s(j(b,{historicalData:a.data}))}catch(r){s(j(E,r.message))}},ve={loading:!1,securitiesInfo:{},historicalData:[],error:""},_e=(t=ve,s)=>{switch(s.type){case C:return{...t,loading:!0};case b:return s.payload.historicalData?{...t,loading:!1,historicalData:s.payload.historicalData,error:""}:{...t,loading:!1,securitiesInfo:s.payload,error:""};case E:return{...t,loading:!1,securitiesInfo:{},historicalData:[],error:s.payload};default:return t}},Ce=z({session:fe,search:we,securities:_e});let W;W=Z(se);const be=t=>ee(Ce,t,W);function Ee(){const t=P(),s=g(),r=y(h=>h.session.user),[a,n]=i.useState(""),[o,d]=i.useState(""),[u,l]=i.useState({});if(r)return e.jsx(M,{to:"/",replace:!0});const c=async h=>{h.preventDefault();const p=await s(A({email:a,password:o}));p?l(p):t("/")};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Log In"}),u.length>0&&u.map(h=>e.jsx("p",{children:h},h)),e.jsxs("form",{onSubmit:c,children:[e.jsxs("label",{children:["Email",e.jsx("input",{type:"text",value:a,onChange:h=>n(h.target.value),required:!0})]}),u.email&&e.jsx("p",{children:u.email}),e.jsxs("label",{children:["Password",e.jsx("input",{type:"password",value:o,onChange:h=>d(h.target.value),required:!0})]}),u.password&&e.jsx("p",{children:u.password}),e.jsx("button",{type:"submit",children:"Log In"})]})]})}function T(){const t=g(),s=P(),r=y(m=>m.session.user),[a,n]=i.useState(""),[o,d]=i.useState(""),[u,l]=i.useState(""),[c,h]=i.useState(""),[p,_]=i.useState({});if(r)return e.jsx(M,{to:"/",replace:!0});const x=async m=>{if(m.preventDefault(),u!==c)return _({confirmPassword:"Confirm Password field must be the same as the Password field"});const L=await t(q({email:a,username:o,password:u}));L?_(L):s("/")};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Sign Up"}),p.server&&e.jsx("p",{children:p.server}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("label",{children:["Email",e.jsx("input",{type:"text",value:a,onChange:m=>n(m.target.value),required:!0})]}),p.email&&e.jsx("p",{children:p.email}),e.jsxs("label",{children:["Username",e.jsx("input",{type:"text",value:o,onChange:m=>d(m.target.value),required:!0})]}),p.username&&e.jsx("p",{children:p.username}),e.jsxs("label",{children:["Password",e.jsx("input",{type:"password",value:u,onChange:m=>l(m.target.value),required:!0})]}),p.password&&e.jsx("p",{children:p.password}),e.jsxs("label",{children:["Confirm Password",e.jsx("input",{type:"password",value:c,onChange:m=>h(m.target.value),required:!0})]}),p.confirmPassword&&e.jsx("p",{children:p.confirmPassword}),e.jsx("button",{type:"submit",children:"Sign Up"})]})]})}const Re=({data:t})=>{const s=t==null?void 0:t.map(r=>({date:new Date(r.date).toLocaleString(),close:r.data.close}));return e.jsx(ne,{width:"100%",height:400,children:e.jsxs(ae,{data:s,children:[e.jsx(oe,{strokeDasharray:"3 3"}),e.jsx(ie,{dataKey:"date"}),e.jsx(ce,{}),e.jsx(le,{}),e.jsx(ue,{type:"monotone",dataKey:"close",stroke:"#8884d8",activeDot:{r:8}})]})})},Pe="_securitiesPage_irikd_1",Ie="_leftColumn_irikd_6",ke="_rightColumn_irikd_11",Ne="_header_irikd_17",Le="_change_irikd_31",De="_changePercent_irikd_36",Te="_periodButtons_irikd_41",Ue="_orderSection_irikd_61",Me="_watchlist_irikd_96",Fe="_additionalInfo_irikd_114",f={securitiesPage:Pe,leftColumn:Ie,rightColumn:ke,header:Ne,change:Le,changePercent:De,periodButtons:Te,orderSection:Ue,watchlist:Me,additionalInfo:Fe},Oe=()=>{const{symbol:t}=te(),s=g(),[r,a]=i.useState("1d"),{securitiesInfo:n,historicalData:o}=y(d=>d.securities);return i.useEffect(()=>{s(ye(t)),s(D(t))},[t,s]),i.useEffect(()=>{r==="1d"?s(D(t)):r==="1w"&&s(Se(t))},[r,s,t]),e.jsxs("div",{className:f.securitiesPage,children:[e.jsxs("div",{className:f.leftColumn,children:[e.jsxs("div",{className:f.header,children:[e.jsx("h1",{children:n.name}),e.jsxs("p",{children:[n.price," USD"]}),e.jsxs("p",{className:f.change,children:[n.day_change>0?"+":"",n.day_change," USD"]}),e.jsxs("p",{className:f.changePercent,children:[n.change_percent>0?"+":"",n.change_percent,"%"]})]}),e.jsxs("div",{className:f.periodButtons,children:[e.jsx("button",{onClick:()=>a("1d"),children:"1D"}),e.jsx("button",{onClick:()=>a("1w"),children:"1W"})]}),e.jsx("div",{className:f.chartContainer,children:e.jsx(Re,{data:o})}),e.jsxs("div",{className:f.additionalInfo,children:[e.jsxs("h2",{children:["About ",n.name]}),e.jsx("p",{children:n.description}),e.jsx("h2",{children:"Key Statistics"}),e.jsxs("ul",{children:[e.jsxs("li",{children:["Industry: ",n.industry]}),e.jsxs("li",{children:["Exchange: ",n.exchange_long]}),e.jsxs("li",{children:["Country: ",n.country]}),e.jsxs("li",{children:["Market Cap: ",n.market_cap]}),e.jsxs("li",{children:["52-Week High: ",n["52_week_high"]]}),e.jsxs("li",{children:["52-Week Low: ",n["52_week_low"]]}),e.jsxs("li",{children:["Day High: ",n.day_high]}),e.jsxs("li",{children:["Day Low: ",n.day_low]}),e.jsxs("li",{children:["Day Open: ",n.day_open]}),e.jsxs("li",{children:["Volume: ",n.volume]}),e.jsxs("li",{children:["Last Trade Time: ",new Date(n.last_trade_time).toLocaleString()]})]})]})]}),e.jsxs("div",{className:f.rightColumn,children:[e.jsxs("div",{className:f.orderSection,children:[e.jsxs("h2",{children:["Buy ",n.name]}),e.jsxs("form",{children:[e.jsx("label",{children:"Order Type"}),e.jsxs("select",{children:[e.jsx("option",{value:"buy",children:"Buy Order"}),e.jsx("option",{value:"sell",children:"Sell Order"})]}),e.jsx("label",{children:"Buy In"}),e.jsxs("select",{children:[e.jsx("option",{value:"usd",children:"Dollars"}),e.jsx("option",{value:"shares",children:"Shares"})]}),e.jsx("label",{children:"Amount"}),e.jsx("input",{type:"number",placeholder:"0.00"}),e.jsx("button",{type:"submit",children:"Review Order"})]})]}),e.jsx("div",{className:f.watchlist,children:e.jsx("button",{children:"Add to Watchlist"})})]})]})};const k=i.createContext();function Ae({children:t}){const s=i.useRef(),[r,a]=i.useState(null),[n,o]=i.useState(null),u={modalRef:s,modalContent:r,setModalContent:a,setOnModalClose:o,closeModal:()=>{a(null),typeof n=="function"&&(o(null),n())}};return e.jsxs(e.Fragment,{children:[e.jsx(k.Provider,{value:u,children:t}),e.jsx("div",{ref:s})]})}function qe(){const{modalRef:t,modalContent:s,closeModal:r}=i.useContext(k);return!t||!t.current||!s?null:Q.createPortal(e.jsxs("div",{id:"modal",children:[e.jsx("div",{id:"modal-background",onClick:r}),e.jsx("div",{id:"modal-content",children:s})]}),t.current)}const N=()=>i.useContext(k);function U({modalComponent:t,itemText:s,onItemClick:r,onModalClose:a}){const{setModalContent:n,setOnModalClose:o}=N(),d=()=>{a&&o(a),n(t),typeof r=="function"&&r()};return e.jsx("li",{onClick:d,children:s})}function Be(){const t=g(),[s,r]=i.useState(""),[a,n]=i.useState(""),[o,d]=i.useState({}),{closeModal:u}=N(),l=async c=>{c.preventDefault();const h=await t(A({email:s,password:a}));h?d(h):u()};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Log In"}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("label",{children:["Email",e.jsx("input",{type:"text",value:s,onChange:c=>r(c.target.value),required:!0})]}),o.email&&e.jsx("p",{children:o.email}),e.jsxs("label",{children:["Password",e.jsx("input",{type:"password",value:a,onChange:c=>n(c.target.value),required:!0})]}),o.password&&e.jsx("p",{children:o.password}),e.jsx("button",{type:"submit",children:"Log In"})]})]})}function He(){const t=g(),[s,r]=i.useState(""),[a,n]=i.useState(""),[o,d]=i.useState(""),[u,l]=i.useState(""),[c,h]=i.useState({}),{closeModal:p}=N(),_=async x=>{if(x.preventDefault(),o!==u)return h({confirmPassword:"Confirm Password field must be the same as the Password field"});const m=await t(q({email:s,username:a,password:o}));m?h(m):p()};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Sign Up"}),c.server&&e.jsx("p",{children:c.server}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("label",{children:["Email",e.jsx("input",{type:"text",value:s,onChange:x=>r(x.target.value),required:!0})]}),c.email&&e.jsx("p",{children:c.email}),e.jsxs("label",{children:["Username",e.jsx("input",{type:"text",value:a,onChange:x=>n(x.target.value),required:!0})]}),c.username&&e.jsx("p",{children:c.username}),e.jsxs("label",{children:["Password",e.jsx("input",{type:"password",value:o,onChange:x=>d(x.target.value),required:!0})]}),c.password&&e.jsx("p",{children:c.password}),e.jsxs("label",{children:["Confirm Password",e.jsx("input",{type:"password",value:u,onChange:x=>l(x.target.value),required:!0})]}),c.confirmPassword&&e.jsx("p",{children:c.confirmPassword}),e.jsx("button",{type:"submit",children:"Sign Up"})]})]})}const $e="_profileButtonContainer_v4nw6_2",We="_button_v4nw6_7",Ke="_buttonWrapper_v4nw6_22",w={profileButtonContainer:$e,button:We,buttonWrapper:Ke};function Qe(){const t=g(),s=y(a=>a.session.user),r=a=>{a.preventDefault(),t(me())};return e.jsx("div",{className:w.profileButtonContainer,children:s?e.jsx("button",{className:w.button,onClick:r,children:"Log Out"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:w.buttonWrapper,children:e.jsx(U,{itemText:"Log In",modalComponent:e.jsx(Be,{}),className:w.button})}),e.jsx("div",{className:w.buttonWrapper,children:e.jsx(U,{itemText:"Sign Up",modalComponent:e.jsx(He,{}),className:w.button})})]})})}const Ve="_searchContainer_1brdg_3",Je="_searchIcon_1brdg_8",Xe="_searchInput_1brdg_14",Ye="_searchResults_1brdg_21",Ge="_searchResultItem_1brdg_34",S={searchContainer:Ve,searchIcon:Je,searchInput:Xe,searchResults:Ye,searchResultItem:Ge};function ze(){const[t,s]=i.useState(""),r=g(),a=P(),{results:n}=y(l=>l.search),o=y(l=>l.session.user);i.useEffect(()=>{if(t){const l=setTimeout(()=>{r(je(t))},500);return()=>clearTimeout(l)}},[t,r]);const d=l=>{s(l.target.value)},u=l=>{s(""),a(`/securities/${l}`)};return o?e.jsxs("div",{className:S.searchContainer,children:[e.jsx(de,{className:S.searchIcon}),e.jsx("input",{type:"text",className:S.searchInput,placeholder:"Search",value:t,onChange:d}),t&&n.length>0&&e.jsx("ul",{className:S.searchResults,children:n.map((l,c)=>e.jsxs("li",{className:S.searchResultItem,onClick:()=>u(l.symbol),children:[l.name," (",l.symbol,")"]},c))})]}):null}const Ze="_nav_70yh0_1",es="_navList_70yh0_9",ss="_navItem_70yh0_18",v={nav:Ze,navList:es,navItem:ss};function ts(){return e.jsx("nav",{className:v.nav,children:e.jsxs("ul",{className:v.navList,children:[e.jsx("li",{className:v.navItem,children:e.jsx(X,{to:"/",children:"Home"})}),e.jsx("li",{className:v.navItem,children:e.jsx(ze,{})}),e.jsx("li",{className:v.navItem,children:e.jsx(Qe,{})})]})})}function rs(){const t=g(),[s,r]=i.useState(!1);return i.useEffect(()=>{t(pe()).then(()=>r(!0))},[t]),e.jsx(e.Fragment,{children:e.jsxs(Ae,{children:[e.jsx(ts,{}),s&&e.jsx(re,{}),e.jsx(qe,{})]})})}const ns=Y([{element:e.jsx(rs,{}),children:[{path:"/",element:e.jsx("h1",{children:"Welcome!"})},{path:"login",element:e.jsx(Ee,{})},{path:"signup",element:e.jsx(T,{})},{path:"signup",element:e.jsx(T,{})},{path:"securities/:symbol",element:e.jsx(Oe,{})}]}]);const as=be();V.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(J,{store:as,children:e.jsx(G,{router:ns})})}));
